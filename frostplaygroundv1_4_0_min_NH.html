<!DOCTYPE html><html><head><title>Frost Playground</title><style>.sect,.sect textarea{font-size:12px;line-height:14px}#closebtn,body{font-size:20px}#saves,.sect{overflow-y:auto;overflow-x:hidden}#saves.hid,.finrep.hid{opacity:0;pointer-events:none}#saves,.sect,body{overflow-x:hidden}#saves .filedate,.pagemodal .contentmodal .item,body{transition:background .1s linear}.sbtn,.sect .lnnumb{text-shadow:0 0 5px rgba(0,0,0,.5)}body{color:#fff;font-family:Courier New,monospace;padding:0;margin:0;background:#222;color-scheme:dark;--layer0:#000;--layer1:#111;--layer2:#222;--layer3:#444;--layer4:#555;--layer5:#777;--top0:white;--top1:#eee;--top2:#888;--sel:#52d1ff;--act:#999}#saves,dialog{font-family:Arial}body.light{color:#000;color-scheme:light;background:#eee;--layer0:#fff;--layer1:#ddd;--layer2:#aaa;--layer3:#bbb;--layer4:#eee;--layer5:#f1f1f1;--top0:black;--top1:#111;--top2:#777;--sel:#3a3f99;--act:#ddd}::-webkit-scrollbar{width:10px}::-webkit-scrollbar-track{background:var(--layer2)}::-webkit-scrollbar-thumb{background:var(--layer4);border-radius:10px}::-webkit-scrollbar-thumb:hover{background:var(--layer5)}::-webkit-scrollbar-thumb:active{box-shadow:0 0 10px var(--top0)}button,iframe,input,textarea{border:1px solid rgba(0,0,0,.2);border-radius:2px box-shadow: 0 0;padding:5px}.sect,iframe{padding:0!important;margin:0!important}button{background:var(--layer5)}button:hover,input[type=reset]:hover{background:var(--layer4)}button:active,input[type=reset]:active{background:var(--act)}hr{border-color:currentcolor}input:focus,textarea:focus{outline:0}textarea::selection{background:var(--sel);color:var(--layer0)}.flexsect{display:flex;height:calc(96vh - 2px);width:100vw}iframe{background:#fff}.sect{display:inline-block;box-sizing:content-box;border:1px solid rgba(0,0,0,.2);flex-grow:1;flex-shrink:1;height:100%;width:100%;resize:horizontal}.finrep,.sect iframe,.sect textarea{padding:0;width:100%}.sect textarea{border-radius:0;display:flex;height:inherit!important;flex-grow:1;flex-shrink:1;resize:none;margin:0;border:none;overflow-y:hidden;overflow-x:auto;background:var(--layer1)}.sect iframe{border-radius:0;display:flex;height:100%;border:none;margin:0}#closebtn{position:fixed;right:0;display:none;z-index:max(infinity)}input[type=text]{display:block;width:80vw}input[type=text].smol{display:inline;width:30vw}#topbtn{position:absolute;display:flex;align-content:center;justify-content:center;height:4vh;width:70vw;left:50%;transform:translate(-50%,0)}.sect .lnnumb{color:#5ac91e;width:20px;text-align:right}.sect .lnnumb span{counter-increment:lnnumb;display:block}.sect .lnnumb span::before{content:counter(lnnumb)}.edcontainer{display:flex;min-height:100%}.finrep{display:grid;grid-template-columns:25% 25% 25% 25%;grid-template-rows:60% 40%;margin:0;transition:height .2s,opacity .2s}.finrep.hid{height:0%}.finrep.sho{pointer-events:auto;opacity:1;height:10%}.finrep button,.finrep input{width:100%;grid-column:span 2;padding:0;margin:0;border:none}.finrep button{grid-column:span 1}#saves{display:block;width:100vw;background:var(--layer2);position:fixed;z-index:9000;height:100vh;left:0;top:0;transition:opacity .1s linear}#menubar .menuitem .menudd.sho,#saves.sho,dialog[open]{opacity:1;pointer-events:auto}.cnscont.hid,.sbtn.hid,dialog{pointer-events:none;opacity:0}#saves .filesect .header .filetitle{padding:5px;margin:10px 10px 10px 0;background:var(--layer1);box-shadow:0 5px 5px rgba(0,0,0,.4);border:2px solid rgba(0,0,0,.3);font-size:25px;border-radius:0 10px 10px 0}#saves .filedate{padding:0 10px;display:flex}#menubar .menuitem .menudd .menuddi:not([disabled]):hover,#menubar .menuitem .menutrigger:hover,#saves .filedate:hover,.pagemodal .contentmodal .item:hover{background:rgba(255,255,255,.2)}#saves .filedate .del{width:20px;margin-left:auto;margin-right:20px;transition:transform .2s}#saves .filedate .del:hover{transform:rotate(-30deg)}#menubar{display:flex;flex-direction:row;align-items:center;height:4vh}.cnscont,.pagemodal .contentmodal{flex-direction:column;display:flex}#menubar .menuitem .menutrigger{padding:4px 8px;height:3.5vh;border:none;margin:2px;background:0 0;box-shadow:none}#menubar .menuitem .menudd{display:block;background:var(--layer3);position:absolute;min-width:15vw;max-width:20vw;box-shadow:0 0 5px rgba(0,0,0,.5);border-radius:5px;overflow-x:hidden;border:1px solid rgba(255,255,255,.2);transition:opacity .1s linear,transform .1s linear}#menubar .menuitem .menudd .menuddi{background:var(--layer4);width:100%;text-align:left;box-shadow:none;border:none;border-radius:0}#menubar .menuitem .menudd hr{margin:0;border:1px solid #888}dialog{border:none;display:inline;border-radius:5px;box-shadow:0 10px 30px rgba(0,0,0,.5)}dialog[open]{animation:.2s forwards fadeIn}dialog[open]::backdrop{animation:.5s forwards fadeIn}@keyframes fadeIn{0%{opacity:0}100%{opacity:1}}@keyframes fadeOut{0%{opacity:1}100%{opacity:0}}dialog::backdrop{backdrop-filter:blur(5px);background:rgba(0,0,0,.2)}.closebtn{font-size:1.2em;width:1.7em;height:1.7em;border:none;border-radius:50%;background:rgba(0,0,0,.3);transition:background .1s linear,transform .1s linear}.closebtn:hover{background:var(--layer4);transform:rotate(90deg)}dialog .topmodal .close{margin-left:auto;margin-right:0;display:block}.pagemodal{min-width:70vw;overflow:hidden}#consolee,#playframe,.cnscont{overflow:auto}.pagemodal .contentmodal{height:60vh;overflow:auto}.pagemodal .contentmodal .item{padding:5px}dialog .headermodal h2{font-weight:400;margin:0 0 20px}#consolee,#topbtn button,#txt0e{width:100%}.cnscont{height:100%;box-shadow:0 0 5px rgba(0,0,0,.8);transition:opacity .2s,height .2s}.cnscont .cnsinput{display:flex;height:10%}.cnscont.hid{height:0}.sbtn{font-size:15px;width:35px;height:35px;border-radius:50%;font-weight:700;transition:opacity .1s}.gbtn{background:linear-gradient(135deg,#3f3,#11c011);box-shadow:2px 2px 8px rgba(0,0,0,.8),-2px -2px 8px #3f3}.gbtn:hover{background:linear-gradient(-45deg,#3f3,#11c011)}.gbtn:active{box-shadow:inset 2px 2px 8px rgba(0,0,0,.8),inset -2px -2px 8px #3f3}.rbtn{background:linear-gradient(135deg,#f95353,#a51212);box-shadow:2px 2px 8px rgba(0,0,0,.8),-2px -2px 8px #f95353}.gbtn,.rbtn{border:none;margin:6px}.rbtn:hover{background:linear-gradient(-45deg,#f95353,#a51212)}.rbtn:active{box-shadow:inset 2px 2px 8px rgba(0,0,0,.8),inset -2px -2px 8px #f95353}#svgcontainer,.sect.hid,iframe.hid{display:none}.frame{display:flex;flex-direction:column}#playframe{resize:vertical;height:100%}#menubar .menuitem .menudd.hid{pointer-events:none;opacity:0;transform:scale(.9)}table{border-collapse:collapse;border-spacing:0;border:2px solid rgba(0,0,0,.5);margin-left:auto;margin-right:auto}th{border:1px solid green}td{border:1px solid rgba(0,0,0,.5)}</style><meta charset="utf-8"><meta name="viewport" content="width=device-width"></head><body lang="en"><button id="closebtn" class="closebtn">×</button><div id="overlays"><div id="saves" class="hid"></div><dialog id="historymodal" class='pagemodal'><div class='topmodal'><button class='close closebtn'>×</button></div><div class="headermodal"><h2>History Manager</h2></div><hr/><div class='contentmodal'></div></dialog><dialog id="pref" class='pagemodal'><div class='topmodal'><button class='close closebtn'>×</button></div><div class="headermodal"><h2>Preferences</h2></div><hr/><form class='contentmodal'><label class='item'>Name: <input type="text" class="smol iinput" placeholder="Untitled" id="fne"></input></label><label class='item'>Indent:<select id="sel0" class="iinput"><option value=" ">1space</option><option value="">2space</option><option value="">4space</option><option value="">8space</option><option value="&Tab;" selected>1tab</option><option value="&Tab;&Tab;">2tab</option><option value="&Tab;&Tab;&Tab;&Tab;">4tab</option></select></label><label class='item'>Wrap:<select id="sel1" class="iinput"><option value="nw">None</option><option value="bw">Break</option><option value="ww">Word</option><option value="ab">Break All</option></select></label><label class='item'><input type="checkbox" class="iinput" checked id="chk0">Autoindent</input></label><label class='item'><input type="checkbox" class="iinput" checked id="chk1">Auto-Close Parentheses</input></label><label class='item'><input type="checkbox" class="iinput" checked id="chk2">Auto-Close Quotes</input></label><label class='item'><input type="checkbox" class="iinput" checked id="chk3">Auto-Update</input></label><label class='item'><input type="checkbox" class="iinput" checked id="chk4">Undo History</input></label><div class='item'><button class="iinput">Delete History</input></div><label class='item'> Tab size: <input type="number" class="smol iinput" value="4" id="tse"></input></label><label class='item'><input type="checkbox" class="iinput" checked id="chk5">Update Lines</input></label><label class='item'><input type="checkbox" class="iinput" checked id="chk6">Console Divider</input></label><label class='item'><input type="checkbox" class="iinput" id="chk7">Bundle Cursor and Hotkeys</input></label><label class='item'><input type="checkbox" class="iinput" id="chk8" checked>Auto-cancel closing closed paren</input></label><label class='item'><input type="checkbox" class="iinput" id="chk9">Auto-cancel closing closed quote</input></label><label class='item'><input type="checkbox" class="iinput" id="chk10" checked>Enable console output</input></label><div class="item"><input type="reset" value="Reset Settings"></input></div></form><br/><footer>Version 1.4.0<br/>© 2025 Pacifiky. ||| AGPLv3</footer></dialog></div><div id="topbtn"><button id="trig5e">HTML</button><button id="trig6e">CSS</button><button id="trig7e">JS</button><button id="trig18e">Prev</button><button id="trig9e" value="true">Console</button><button id="trig8e" value="true">Theme</button><button id="trig1e">Fullscreen</button></div><div id="menubar"><div class="menuitem"><button class="menutrigger">File</button><div class="menudd hid" id="filemenu"><button class="menuddi" id="trig2e">Download (ctrl+e)</button><button class="menuddi" id="trig3e">Download URL</button><hr/><button class="menuddi" id="trig10e">Export Database</button><button class="menuddi" id="trig11e">Import Database</button><hr/><button class="menuddi" id="trig12e">Save (ctrl+s)</button><button class="menuddi" id="trig13e">Load (ctrl+o)</button><hr/><button class="menuddi" disabled>Exit (NO ESCAPE)</button></div></div><div class="menuitem"><button class="menutrigger">Edit</button><div class="menudd hid" id="editmenu"><button class="menuddi" id="trig0e">Run</button><button class="menuddi" id="trig16e">Replace (ctrl+h)</button><hr/><button class="menuddi" id="trig14e">Preferences (ctrl+p)</button><button class="menuddi" disabled>Help</button><button class="menuddi" id="trig19e">Goto</button><button class="menuddi" id="trig20e">History Manager</button><button class="menuddi" id="trig15e" disabled>Plugins</button></div></div></div><div class="flexsect"><div class="sect"><div class="finrep hid"><input type="text" placeholder="Find" class="finputfr"></input><input type="text" placeholder="Replace" class="rinputfr"></input><button class="repbtn">Replace</button><button class="close">Close</button></div><div class="edcontainer"><div class="lnnumb"><span></span></div><textarea id="htmlie" class="input" spellcheck="false" style="white-space: nowrap;" placeholder="HTML" ></textarea></div></div><div class="sect"><div class="finrep hid"><input type="text" placeholder="Find"></input><input type="text" placeholder="Replace"></input><button class="repbtn">Replace</button><button class="close">Close</button></div><div class="edcontainer"><div class="lnnumb"><span></span></div><textarea id="cssie" class="input" style="white-space: nowrap;" spellcheck="false" placeholder="CSS"></textarea></div></div><div class="sect"><div class="finrep hid"><input type="text" placeholder="Find"></input><input type="text" placeholder="Replace"></input><button class="repbtn">Replace</button><button class="close">Close</button></div><div class="edcontainer"><div class="lnnumb"><span></span></div><textarea id="jsie" class="input" style="white-space: nowrap;" spellcheck="false" placeholder="JS"></textarea></div></div><div class="sect frame"><iframe id="playframe" srcdoc="<div style='font-family:Arial'><h1>Frost Playground</h1><p>Your code will show up here</p></div>"></iframe><div class="cnscont"><textarea id="consolee" readonly></textarea><div class="cnsinput"><input id="txt0e" placeholder="Command" type="text" spellcheck="false"></input><button id="trig4e">Clear</button></div></div></div></div><div id="svgcontainer"><svg id="trashsvg" class="svg" width="24" height="24" viewBox="0 0 24 24" fill="none" xmlns="http://www.w3.org/2000/svg"><rect x="11" y="10" width="2" height="11" rx="1" fill="currentcolor"/><rect x="4" y="7" width="16" height="16" rx="1" stroke="currentcolor" stroke-width="2"/><rect x="2" y="3" width="20" height="4" rx="1" stroke="currentcolor" stroke-width="2"/><rect x="7" y="10" width="2" height="11" rx="1" fill="currentcolor"/><rect x="15" y="10" width="2" height="11" rx="1" fill="currentcolor"/><mask id="mask0_2282_1246" style="mask-type:alpha" maskUnits="userSpaceOnUse" x="8" y="0" width="8" height="2"><rect x="8" width="8" height="2" fill="#D9D9D9"/></mask><g mask="url(#mask0_2282_1246)"><rect x="10" width="4" height="4" rx="2" fill="currentcolor"/></g></svg></div><script>const pagem=document.getElementsByClassName("pagemodal"),consolee=document.getElementById("consolee"),filebtn=document.getElementById("filemenu").getElementsByClassName("menuddi"),editbtn=document.getElementById("editmenu").getElementsByClassName("menuddi"),topbtn=document.getElementById("topbtn").children,trig4=document.getElementById("trig4e"),pref=document.getElementById("pref"),historyMod=document.getElementById("historymodal"),txt0=document.getElementById("txt0e"),htmli=document.getElementById("htmlie"),cssi=document.getElementById("cssie"),jsin=document.getElementById("jsie"),playframe=document.getElementById("playframe"),prefite=pref.getElementsByClassName("contentmodal")[0].getElementsByClassName("item"),prefinp=Array(prefite.length);for(let i=0;i<prefinp.length;i++)prefinp[i]=prefite[i].getElementsByClassName("iinput")[0];const inps=document.getElementsByClassName("input"),nums=document.getElementsByClassName("lnnumb"),savechars=[":",";","!","+","=","-","Enter","?",".",">","<","*","//","&","|"],parencharso=new Uint8Array([40,91,123,60]),parencharsc=new Uint8Array([41,93,125,62]),commitDelay=2e3;let chnbuf=[!1,0,[0,[],0,0]],lastInputTime=0,updateen=!0;var fieldHistory=Array(inps.length).fill().map(()=>[[],[]]);const delsvg=document.getElementById("trashsvg");function vcnslog(e){prefinp[15].checked&&(consolee.value+=e+"\n",consolee.scrollTop=consolee.scrollHeight)}function vcnsdir(e){if(prefinp[15].checked){let t=Object.getOwnPropertyNames(e);for(let s=0;s<t.length;s++)consolee.value+=t[s]+": "+e[t[s]]+"\n";consolee.scrollTop=consolee.scrollHeight}}function vcnsclr(){consolee.value="",consolee.placeholder="Console cleared"}playframe.contentWindow.console={log:vcnslog,error:function(e){vcnslog("Error:"+e)},warn:function(e){vcnslog("Warn:"+e)},info:function(e){vcnslog("Info:"+e)},debug:function(e){vcnslog("Debug:"+e)},clear:vcnsclr,dir:vcnsdir};class storageEmulator{constructor(){this.db=new Map}getItem(e){return this.db.get(e)||null}setItem(e,t){this.db.set(e,t)}removeItem(e){this.db.remove(e)}}class fileSys{constructor(e,t,s){this.container=e;try{this.storage=localStorage}catch(n){console.warn("localStorage unavailable, loading polyfill\nError: "+n.stack),alert("WARNING! Native storage api unavailable, files will be flushed on exit."),this.storage=new storageEmulator}this.files=JSON.parse(this.storage.getItem(t))||[],this.filekey=JSON.parse(this.storage.getItem(s))||[],this.filesid=t,this.filekeyid=s,this.sectors=Array(this.filekey.length),this._closeLocalStorage=this._closeLocalStorage.bind(this),this._closeLocalStorageKey=this._closeLocalStorageKey.bind(this)}renderPosts(e,t,s){for(let n=this.files[e].length-1;n>=0;n--){let l=this.files[e][n][0],a=document.createElement("div");a.classList.add("filedate"),a.innerText=new Date(this.files[e][n][0]).toUTCString(),a.addEventListener("click",t=>{setEnv(this.filekey[e],this.files[e][n][1],this.files[e][n][2],this.files[e][n][3]),trig0f(null),intUpdLn.call(htmli),intUpdLn.call(cssi),intUpdLn.call(jsin),this._closeLocalStorage(t)});let r=delsvg.cloneNode();r.innerHTML=delsvg.innerHTML,r.classList.add("del"),r.addEventListener("click",t=>{t.stopPropagation();if("y"===prompt("Are you sure you want to delete? (y/n)").toLowerCase()){a.remove();let n=this.filekey.indexOf(s),r=0;for(let c=0;c<this.files[n].length;c++)this.files[n][c][0]===l&&(r=c);this.files[n].splice(r,1),0===this.files[n].length&&(this.filekey.splice(n,1),this.files.splice(n,1),this.sectors[e].remove()),this.storage.setItem(this.filesid,JSON.stringify(this.files)),this.storage.setItem(this.filekeyid,JSON.stringify(this.filekey))}}),a.appendChild(r),t.appendChild(a)}}openUI(){this.container.classList.contains("hid")?(this.update(),document.getElementById("closebtn").addEventListener("click",this._closeLocalStorage),document.getElementById("closebtn").style="display:inline",document.addEventListener("keydown",this._closeLocalStorageKey),this.container.classList.add("sho"),this.container.classList.remove("hid")):this._closeLocalStorage(null)}update(){if(this.files=JSON.parse(this.storage.getItem(this.filesid))||[],this.filekey=JSON.parse(this.storage.getItem(this.filekeyid))||[],this.container.innerHTML="",null!==this.filekey)for(let e=0;e<this.filekey.length;e++){this.sectors[e]=document.createElement("div"),this.sectors[e].classList.add("filesect");let t=document.createElement("div");t.classList.add("header");let s=document.createElement("input"),n=document.createElement("button"),l=document.createElement("button"),a=this.filekey[e],r=document.createElement("div");n.classList.add("updatetxt"),n.classList.add("sbtn"),n.classList.add("hid"),n.classList.add("gbtn"),n.innerText="✓",l.classList.add("restxt"),l.classList.add("sbtn"),l.classList.add("rbtn"),l.classList.add("hid"),l.innerText="\xd7",r.classList.add("dateCont"),s.setAttribute("spellcheck","false"),s.value=a,s.classList.add("filetitle"),s.addEventListener("keydown",t=>{"Enter"===t.key&&(a=this.updateCat(s,a,e),n.classList.remove("sho"),l.classList.remove("sho"),n.classList.add("hid"),l.classList.add("hid"))}),s.addEventListener("input",e=>{s.value!=a?(n.classList.add("sho"),l.classList.add("sho"),n.classList.remove("hid"),l.classList.remove("hid")):(n.classList.remove("sho"),l.classList.remove("sho"),n.classList.add("hid"),l.classList.add("hid"))}),l.addEventListener("click",e=>{s.value=a,n.classList.remove("sho"),l.classList.remove("sho"),n.classList.add("hid"),l.classList.add("hid")}),n.addEventListener("click",t=>{a=this.updateCat(s,a,e),n.classList.remove("sho"),l.classList.remove("sho"),n.classList.add("hid"),l.classList.add("hid")}),t.appendChild(s),t.appendChild(n),t.appendChild(l),this.sectors[e].appendChild(t),this.sectors[e].appendChild(r),this.renderPosts(e,r,a),this.container.appendChild(this.sectors[e]),this.sectors[e].appendChild(document.createElement("hr"))}}updateCat(e,t,s){if(e.value=e.value||"Untitled",-1===this.filekey.indexOf(e.value))this.filekey[this.filekey.indexOf(t)]=e.value,this.storage.setItem(this.filekeyid,JSON.stringify(this.filekey));else if(e.value!==t&&"y"===prompt("Are you sure you want to merge? (y/n)").toLowerCase()){let n=this.filekey.indexOf(t);this.filekey.splice(n,1);let l=this.files.splice(n,1)[0],a=this.filekey.indexOf(e.value),r=e.value;e.value="",this.files[a]=this.files[a].concat(l),this.files[a].sort((e,t)=>e[0]-t[0]),this.sectors[s].remove();let c=null;for(let o=0;o<this.container.children.length;o++){let d=this.container.children[o];d.getElementsByClassName("filetitle")[0].value===r&&(c=d)}let p=c.getElementsByClassName("dateCont")[0];p.innerHTML="",this.renderPosts(a,p,r),this.storage.setItem(this.filesid,JSON.stringify(this.files)),this.storage.setItem(this.filekeyid,JSON.stringify(this.filekey))}return e.value}_closeLocalStorage(e){this.container.classList.add("hid"),this.container.classList.remove("sho"),document.getElementById("closebtn").style="",document.getElementById("closebtn").removeEventListener("click",this._closeLocalStorage),document.body.removeEventListener("keydown",this._closeLocalStorageKey)}_closeLocalStorageKey(e){"Escape"===e.key&&this._closeLocalStorage(e)}saveTo(){let e=prefinp[0].value||"Untitled";(null===this.files||null===this.filekey)&&(this.files=[],this.filekey=[]);let t=this.filekey.indexOf(e);-1===t?(this.files.push([[Date.now(),htmli.value,cssi.value,jsin.value]]),this.filekey.push(e)):this.files[t].push([Date.now(),htmli.value,cssi.value,jsin.value]),this.storage.setItem(this.filesid,JSON.stringify(this.files)),this.storage.setItem(this.filekeyid,JSON.stringify(this.filekey))}}class menuSys{constructor(e){this.menu=e,this.items=this.menu.getElementsByClassName("menuitem");for(let t=0;t<this.items.length;t++){let s=this.items[t].getElementsByClassName("menutrigger")[0],n=this.items[t].getElementsByClassName("menudd")[0];document.addEventListener("click",e=>{n.classList.contains("sho")&&e.target!=n&&e.target!==s&&(n.classList.add("hid"),n.classList.remove("sho"))}),s.addEventListener("click",e=>{n.classList.toggle("sho"),n.classList.toggle("hid")}),n.addEventListener("mouseover",e=>{n.classList.add("mouse"),n.classList.remove("notmouse")}),n.addEventListener("mouseleave",e=>{n.classList.add("notmouse"),n.classList.remove("mouse")}),n.classList.add("notmouse")}}}let menub=new menuSys(document.getElementById("menubar"));var savedb=new fileSys(document.getElementById("saves"),"saves","saveskey");for(let i=0;i<inps.length;i++){let e=inps[i].parentNode.parentNode.getElementsByClassName("finrep")[0],t=e.getElementsByClassName("finputfr")[0],s=e.getElementsByClassName("rinputfr")[0];inps[i].addEventListener("focusin",e=>{for(let t=0;t<inps.length;t++)inps[t].classList.remove("active");inps[i].classList.add("active")}),inps[i].addEventListener("beforeinput",e=>checkInput(e,i)),inps[i].addEventListener("input",e=>{if(fpar=flipParen(e.data)){if(prefinp[4].checked){let t=inps[i].selectionStart;inps[i].value=inps[i].value.substring(0,inps[i].selectionStart)+fpar+inps[i].value.substring(inps[i].selectionEnd,inps[i].value.length),inps[i].selectionStart=inps[i].selectionEnd=t,checkInput({inputType:"insertText",data:fpar},i)}saveHistory(),chnbuf[0]=!1}else switch(e.data){case")":case"]":case"}":if(inps[i].value[inps[i].selectionEnd]==e.data&&prefinp[13].checked){let s=inps[i].selectionStart;inps[i].value=inps[i].value.substring(0,inps[i].selectionStart)+inps[i].value.substring(inps[i].selectionEnd+1),inps[i].selectionStart=inps[i].selectionEnd=s}break;case"'":case'"':case"`":if(inps[i].value[inps[i].selectionEnd]==e.data&&prefinp[14].checked){let n=inps[i].selectionStart;inps[i].value=inps[i].value.substring(0,inps[i].selectionStart)+inps[i].value.substring(inps[i].selectionEnd+1),inps[i].selectionStart=inps[i].selectionEnd=n}else if(prefinp[5].checked){let l=inps[i].selectionStart;inps[i].value=inps[i].value.substring(0,inps[i].selectionStart)+e.data+inps[i].value.substring(inps[i].selectionEnd,inps[i].value.length),inps[i].selectionStart=inps[i].selectionEnd=l,checkInput({inputType:"insertText",data:e.data},i)}saveHistory(),chnbuf[0]=!1}updateen&&trig0f.call(inps[i]),prefinp[10].checked&&intUpdLn.call(inps[i])}),inps[i].addEventListener("keydown",t=>{switch(t.key){case"Tab":if(t.shiftKey){t.preventDefault();let s=st=inps[i].selectionStart,n=en=inps[i].selectionEnd,l=[];for(let a=inps[i].selectionStart-1;a>=0&&"\n"!=inps[i].value[a];a--)st=a;for(let r=inps[i].selectionEnd;r<inps[i].value.length&&"\n"!=inps[i].value[r];++r)en=r;let c=st;for(let o=st;o<en;o++)"\n"===inps[i].value[o]&&(l.push([c,o]),c=o+1);l.push([c,en+1]);let d=0,p=!0;for(let h=0;h<l.length;h++){let u=inps[i].value.substring(l[h][0]+d,l[h][1]+d),f="";for(let v=0;v<u.length;v++)if(" "===u[v]||"	"===u[v])f+=u[v];else break;let g=u.substring(f.length,u.length),y=f.length;(f=f.replace(prefinp[1].value,"")).length-y==0&&0===h&&(p=!1),inps[i].selectionStart=l[h][0]+d,inps[i].selectionEnd=l[h][1]+d,checkInput({inputType:"insertFromPaste",data:f+g},i),saveHistory(),chnbuf[0]=!1,inps[i].value=inps[i].value.substring(0,l[h][0]+d)+f+g+inps[i].value.substring(l[h][1]+d),d+=f.length-y}inps[i].selectionStart=p?s-prefinp[1].value.length:s,inps[i].selectionEnd=n+d}else{t.preventDefault();let m=st=inps[i].selectionStart,$=en=inps[i].selectionEnd,b=[];for(let E=inps[i].selectionStart-1;E>=0&&"\n"!=inps[i].value[E];E--)st=E;for(let L=inps[i].selectionEnd;L<inps[i].value.length&&"\n"!=inps[i].value[L];++L)en=L;let k=st;for(let _=st;_<en;_++)"\n"===inps[i].value[_]&&(b.push([k,_]),k=_+1);b.push([k,en+1]);for(let S=0;S<b.length;S++){let w=inps[i].value.substring(b[S][0]+S*prefinp[1].value.length,b[S][1]+S*prefinp[1].value.length),I="";for(let C=0;C<w.length;C++)if(" "===w[C]||"	"===w[C])I+=w[C];else break;let H=w.substring(I.length,w.length);I+=prefinp[1].value,inps[i].selectionStart=b[S][0]+S*prefinp[1].value.length,inps[i].selectionEnd=b[S][1]+S*prefinp[1].value.length,checkInput({inputType:"insertFromPaste",data:I+H},i),saveHistory(),chnbuf[0]=!1,inps[i].value=inps[i].value.substring(0,b[S][0]+S*prefinp[1].value.length)+I+H+inps[i].value.substring(b[S][1]+S*prefinp[1].value.length)}inps[i].selectionStart=m+prefinp[1].value.length,inps[i].selectionEnd=$+prefinp[1].value.length*b.length}break;case"Enter":if(prefinp[3].checked){t.preventDefault();let B=st=en=inps[i].selectionStart;for(let N=B-1;N>=0&&"\n"!=inps[i].value[N];N--)st=N;for(let T=B;T<inps[i].value.length&&"\n"!=inps[i].value[T];++T)en=T;let x="",F=inps[i].value.substring(st,en);for(let D=0;D<F.length;D++)if(" "===F[D]||"	"===F[D])x+=F[D];else break;let U=1;switch((inps[i].value[inps[i].selectionStart-1]||"\0").charCodeAt(0)){case 40:case 91:case 123:case 62:switch((inps[i].value[inps[i].selectionStart]||"\0").charCodeAt(0)){case 41:case 93:case 125:case 60:U-=x.length+1,x+=prefinp[1].value+"\n"+x;break;default:x+=prefinp[1].value}}inps[i].selectionStart=B,checkInput({inputType:"insertFromPaste",data:"\n"+x},i),inps[i].value=inps[i].value.substring(0,inps[i].selectionStart)+"\n"+x+inps[i].value.substring(inps[i].selectionEnd),inps[i].selectionStart=B+x.length+U,inps[i].selectionEnd=inps[i].selectionStart,prefinp[10].checked&&intUpdLn.call(inps[i])}break;default:if(t.ctrlKey)switch(t.key){case"Z":case"y":redoHistory(i);break;case"z":t.preventDefault(),undoHistory(i);break;case"h":t.preventDefault(),e.classList.toggle("hid"),e.classList.toggle("sho")}else prefinp[7].checked&&savechars.includes(t.key)&&(saveHistory(),chnbuf[0]=!1)}}),e.getElementsByClassName("close")[0].addEventListener("click",t=>{e.classList.remove("sho"),e.classList.add("hid")}),e.getElementsByClassName("repbtn")[0].addEventListener("click",e=>{let n=parseRegex(t.value),l=parseRegex(s.value),a=inps[i].value.replaceAll(n,l);saveHistory(),chnbuf[0]=!1,inps[i].selectionStart=0,inps[i].selectinEnd=inps[i].value.length-1,checkInput({inputType:"insertFromPaste",data:a},i),saveHistory(),chnbuf[0]=!1,inps[i].selectionStart=inps[i].selectionEnd=0,inps[i].value=a,prefinp[10].checked&&intUpdLn.call(inps[i])})}function intUpdLn(e){let t=this.parentNode.getElementsByClassName("lnnumb")[0],s=this.value.split("\n").length;if(t.children.length!=s){let n=document.createElement("span");t.innerHTML="";for(let l=0;l<s;l++)t.appendChild(n),n=n.cloneNode()}}function undoHistory(e){let t;if(chnbuf[0]){if(chnbuf[1]===e)t=chnbuf[2],chnbuf[0]=!1;else{if(saveHistory(),0===fieldHistory[e][0].length){inps[e].value="";return}t=fieldHistory[e][0].pop()}}else{if(0===fieldHistory[e][0].length){inps[e].value="";return}t=fieldHistory[e][0].pop()}let[s,n]=restoreChange(t,inps[e].value);inps[e].value=n,inps[e].selectionStart=inps[e].selectionEnd=s[0],fieldHistory[e][1].push(s),updateen&&trig0f(null),prefinp[10].checked&&intUpdLn.call(inps[e])}function redoHistory(e){if(0===fieldHistory[e][1].length)return;let[t,s]=restoreChange(fieldHistory[e][1].pop(),inps[e].value);inps[e].value=s,inps[e].selectionStart=inps[e].selectionEnd=t[0]+t[3],fieldHistory[e][0].push(t),updateen&&trig0f(null),prefinp[10].checked&&intUpdLn.call(inps[e])}function restoreChange(e,t){let s=[e[0],[],e[1].length,e[3]];return e[2]>0&&(s[0]-=e[2],s[1]=t.substr(s[0],e[2]).split("").reverse(),t=t.substring(0,s[0])+t.substring(s[0]+e[2])),e[1].length>0&&(t=t.substring(0,s[0])+e[1].reverse().join("")+t.substring(s[0]),s[0]+=e[1].length),[s,t]}function saveHistory(){chnbuf[0]&&(chnbuf[2][2]>0||chnbuf[2][1].length>0)&&fieldHistory[chnbuf[1]][0].push([chnbuf[2][0],chnbuf[2][1].slice(),chnbuf[2][2],chnbuf[2][3]])}function logHistory(){let e="--Begin HistoryLog--\n{\n";for(let t=0;t<fieldHistory.length;t++){e+="Undo"+t.toString()+"{\n";for(let s=0;s<fieldHistory[t][0].length;s++)e+="Change"+s.toString()+"{\nCursor: "+fieldHistory[t][0][s][0]+"\nDelArr: ["+fieldHistory[t][0][s][1].join(",")+"]\nnAdd: "+fieldHistory[t][0][s][2]+"\nCuroff: "+fieldHistory[t][0][s][3]+"\n}\n";e+="}\nRedo"+t.toString()+"{\n";for(let n=0;n<fieldHistory[t][1].length;n++)e+="Change"+n.toString()+"{\nCursor: "+fieldHistory[t][1][n][0]+"\nDelArr: ["+fieldHistory[t][1][n][1].join(",")+"]\nnAdd: "+fieldHistory[t][1][n][2]+"\nCuroff: "+fieldHistory[t][1][n][3]+"\n}\n";e+="}\n"}return e+"}\n--End HistoryLog--"}function checkInput(e,t){chnbuf[0]?(Date.now()-lastInputTime>2e3||chnbuf[1]!=t)&&(saveHistory(),chnbuf[1]=t,chnbuf[2][0]=inps[t].selectionEnd,chnbuf[2][1].length=0,chnbuf[2][2]=0,chnbuf[2][3]=0):(chnbuf[2][0]=inps[t].selectionEnd,chnbuf[2][1].length=0,chnbuf[2][2]=0,chnbuf[2][3]=0,lastInputTime=Date.now()),fieldHistory[t][1].length>0&&(fieldHistory[t][0]=fieldHistory[t][0].concat(fieldHistory[t][1]),fieldHistory[t][1].length=0);let s="";inps[t].selectionStart,chnbuf[2][0];let n=inps[t].selectionEnd<=chnbuf[2][0],l=inps[t].selectionStart>=chnbuf[2][0]-chnbuf[2][2],a=inps[t].selectionEnd>=chnbuf[2][0]-chnbuf[2][2],r=n&&a;switch(inps[t].selectionStart!=inps[t].selectionEnd?(r||(saveHistory(),chnbuf[1]=t,chnbuf[2][1].length=0,chnbuf[2][2]=0,chnbuf[2][3]=0),s=inps[t].value.substring(inps[t].selectionStart,inps[t].selectionEnd)):inps[t].selectionEnd!=chnbuf[2][0]+chnbuf[2][3]&&(prefinp[12].checked&&r?chnbuf[2][3]=inps[t].selectionEnd-chnbuf[2][0]:(saveHistory(),chnbuf[1]=t,chnbuf[2][1].length=0,chnbuf[2][2]=0,chnbuf[2][3]=0)),e.inputType){case"insertText":case"insertLineBreak":if(s){if(prefinp[12].checked&&r){let c=0,o=0;if(l)c+=inps[t].selectionEnd-inps[t].selectionStart;else{for(let d=chnbuf[2][0]-chnbuf[2][2]-1;d>=inps[t].selectionStart;d--)chnbuf[2][1].push(inps[t].value[d]),o++;c+=inps[t].selectionEnd-(chnbuf[2][0]-chnbuf[2][2])}chnbuf[2][2]-=c-1,chnbuf[2][0]-=o+c-1,chnbuf[2][3]=inps[t].selectionStart+1-chnbuf[2][0]}else saveHistory(),chnbuf[2][1]=s.split("").reverse(),chnbuf[2][2]=1,chnbuf[2][0]=inps[t].selectionStart+1,chnbuf[2][3]=0}else chnbuf[2][2]++,chnbuf[2][0]++,chnbuf[2][3]=inps[t].selectionStart+1-chnbuf[2][0];break;case"deleteContentBackward":case"deleteByCut":if(inps[t].value.length>0){if(s){if(prefinp[12].checked&&r){let p=0,h=0;if(l)p+=inps[t].selectionEnd-inps[t].selectionStart;else{for(let u=chnbuf[2][0]-chnbuf[2][2]-1;u>=inps[t].selectionStart;u--)chnbuf[2][1].push(inps[t].value[u]),h++;p+=inps[t].selectionEnd-(chnbuf[2][0]-chnbuf[2][2])}chnbuf[2][2]-=p,chnbuf[2][0]-=p+h,chnbuf[2][3]=inps[t].selectionStart-chnbuf[2][0]}else saveHistory(),chnbuf[1]=t,chnbuf[2][2]=0,chnbuf[2][1]=s.split("").reverse(),chnbuf[2][0]=inps[t].selectionStart,chnbuf[2][3]=0}else chnbuf[2][2]>0?chnbuf[2][2]--:chnbuf[2][1].push(inps[t].value[inps[t].selectionEnd-1]),chnbuf[2][0]--}break;case"historyUndo":alert("Native Undo Error!");break;case"insertFromPaste":case"insertFromDrop":if(prefinp[12].checked&&(!s||r)){if(s){let f=0,v=0;if(l)f+=inps[t].selectionEnd-inps[t].selectionStart;else{for(let g=chnbuf[2][0]-chnbuf[2][2]-1;g>=inps[t].selectionStart;g--)chnbuf[2][1].push(inps[t].value[g]),v++;f+=inps[t].selectionEnd-(chnbuf[2][0]-chnbuf[2][2])}chnbuf[2][2]+=e.data.length-f,chnbuf[2][0]+=e.data.length-(f+v),chnbuf[2][3]=inps[t].selectionStart+e.data.length-chnbuf[2][0]}else chnbuf[2][2]+=e.data.length,chnbuf[2][0]+=e.data.length}else saveHistory(),chnbuf[1]=t,chnbuf[2][1]=s.split("").reverse(),chnbuf[2][2]=e.data.length,chnbuf[2][0]=inps[t].selectionStart+e.data.length,chnbuf[2][3]=0}chnbuf[0]=!0,lastInputTime=Date.now()}function flipParen(e){switch(e){case"(":return")";case"[":return"]";case"{":return"}";default:return""}}function trig0f(e){playframe.click(),playframe.srcdoc=`<!DOCTYPE html><html>${htmli.value}<style>${cssi.value}</style><script>var console = {log: parent.vcnslog,error: function (m){parent.vcnslog("Error:" + m)},warn: function (m){parent.vcnslog("Warn:" + m)},info: function (m){parent.vcnslog("Info:" + m)},debug: function (m){parent.vcnslog("Debug:" + m)},clear: parent.vcnsclr,dir: parent.vcnsdir};try{${jsin.value}}catch(e){console.error(e.stack)}<\/script></html>`,prefinp[11].checked&&consolee.value.length>0&&consolee.value[consolee.value.length-2]+consolee.value[consolee.value.length-3]!="--"&&(consolee.value+="--"+(new Date).toLocaleString()+"--\n")}function setEnv(e,t,s,n){prefinp[0].value=e,htmli.value=t,cssi.value=s,jsin.value=n}function dwnl(e,t){let s=document.createElement("a");s.download=t,s.type="text/html";let n=new Blob([e]);s.href=URL.createObjectURL(n),document.body.appendChild(s),s.click(),s.remove()}function fulls(e){document.getElementById("closebtn").addEventListener("click",intSetFullFrame),document.addEventListener("keydown",intEscFullFrame),playframe.style="position:fixed;z-index:calc(max(infinity)-1);width:100vw;height:100vh;left:0;top:0;",document.getElementById("closebtn").style="display:inline"}function intSetFullFrame(e){playframe.style="",document.getElementById("closebtn").style="",document.getElementById("closebtn").removeEventListener("click",intSetFullFrame),document.removeEventListener("keydown",intEscFullFrame)}function intEscFullFrame(e){"Escape"===e.key&&intSetFullFrame(e)}function updTS(){for(let e=0;e<inps.length;e++)inps[e].style.tabSize=prefinp[9].value}function savefil(){dwnl(`<!DOCTYPE html><html>${htmli.value}<style>${cssi.value}</style><script>${jsin.value}<\/script></html>`,""===prefinp[0].value?"Untitled-FrostPlayground.html":prefinp[0].value+"-FrostPlayground.html")}function parseRegex(e){let t="",s=!1;for(let n=0;n<e.length;n++)if(s){switch(e[n]){case"\\":t+="\\";break;case"n":t+="\n";break;case"t":t+="	"}s=!1}else"\\"==e[n]?s=!0:t+=e[n];return t}function countl(e,t){let s=0;for(let n=0;n<e.length;n++)e[n]===t&&s++;return s}document.body.addEventListener("keydown",e=>{"e"===e.key&&e.ctrlKey?(e.preventDefault(),savefil()):"o"===e.key&&e.ctrlKey?(e.preventDefault(),document.getElementById("saves").classList.contains("hid")?savedb.openUI():savedb._closeLocalStorage(null)):"s"===e.key&&e.ctrlKey?(e.preventDefault(),savedb.saveTo()):"p"===e.key&&e.ctrlKey&&(e.preventDefault(),pref.open?pref.close():(pref.showModal(),prefinp[6].checked=updateen))}),window.onbeforeunload=function(){return""!=htmli.value||""!=cssi.value||""!=jsin.value?"Are you sure you have saved your work?":void 0},editbtn[0].addEventListener("click",trig0f),topbtn[6].addEventListener("click",fulls),filebtn[0].addEventListener("click",e=>{savefil()}),filebtn[1].addEventListener("click",e=>{dwnl("data:text/html;charset=utf-8,%0A"+encodeURIComponent(`<!DOCTYPE html><html>${htmli.value}<style>${cssi.value}</style><script>${jsin.value}<\/script></html>`),"CodeURL-FrostPlayground.txt")}),trig4.addEventListener("click",e=>{playframe.contentWindow.console.clear()}),topbtn[0].addEventListener("click",e=>{htmli.parentNode.parentNode.classList.toggle("hid")}),topbtn[1].addEventListener("click",e=>{cssi.parentNode.parentNode.classList.toggle("hid")}),topbtn[2].addEventListener("click",e=>{jsin.parentNode.parentNode.classList.toggle("hid")}),topbtn[3].addEventListener("click",e=>{playframe.classList.toggle("hid"),playframe.classList.contains("hid")&&playframe.parentNode.getElementsByClassName("cnscont")[0].classList.contains("hid")?playframe.parentNode.classList.add("hid"):playframe.parentNode.classList.remove("hid"),updateen=!playframe.classList.contains("hid")}),topbtn[4].addEventListener("click",e=>{let t=playframe.parentNode.getElementsByClassName("cnscont")[0];t.classList.toggle("hid"),playframe.classList.contains("hid")&&t.classList.contains("hid")?playframe.parentNode.classList.add("hid"):playframe.parentNode.classList.remove("hid")}),topbtn[5].addEventListener("click",e=>{document.body.classList.toggle("light")}),filebtn[4].addEventListener("click",e=>savedb.saveTo()),filebtn[5].addEventListener("click",e=>savedb.openUI()),editbtn[2].addEventListener("click",e=>pref.showModal()),prefinp[8].addEventListener("click",e=>{for(let t=0;t<fieldHistory.length;t++)fieldHistory[t][0].length=0,fieldHistory[t][1].length=0}),editbtn[1].addEventListener("click",e=>{for(let t=0;t<inps.length;t++)if(inps[t].classList.contains("active")){let s=inps[t].parentNode.parentNode.getElementsByClassName("finrep")[0];s.classList.toggle("hid"),s.classList.toggle("sho")}}),editbtn[4].addEventListener("click",e=>{let t=parseInt(prompt("Enter line number:"));if(t){for(let s=0;s<inps.length;s++)if(inps[s].classList.contains("active")){let n=1;for(let l=0;l<inps[s].value.length;l++)if("\n"===inps[s].value[l]&&++n===t){inps[s].setSelectionRange(l+1,l+1),inps[s].focus();break}}}}),editbtn[5].addEventListener("click",e=>{historyMod.showModal(),historyMod.getElementsByClassName("contentmodal")[0].innerText=logHistory()}),prefinp[9].addEventListener("input",updTS);for(let i=0;i<pagem.length;i++)pagem[i].getElementsByClassName("close")[0].addEventListener("click",e=>{pagem[i].close()});prefinp[2].addEventListener("input",e=>{for(let t=0;t<inps.length;t++)switch(prefinp[2].value){case"ww":inps[t].style="word-wrap:normal;";break;case"bw":inps[t].style="word-wrap:break-word;";break;case"ab":inps[t].style="word-break: break-all;";break;default:inps[t].style="white-space: nowrap;"}}),prefinp[6].addEventListener("input",e=>{updateen=prefinp[6].checked}),txt0.addEventListener("keydown",e=>{if("Enter"===e.key){e.preventDefault(),consolee.value+=">"+txt0.value+"\n";try{let t=playframe.contentWindow.eval(txt0.value);if(consolee.value+=t+"\n","object"==typeof t&&!Array.isArray(t)){let s=Object.getOwnPropertyNames(t);for(let n=0;n<s.length;n++)consolee.value+=s[n]+": "+t[s[n]]+"\n"}}catch(l){consolee.value+=l.stack+"\n"}txt0.value="",consolee.scrollTop=consolee.scrollHeight}}),filebtn[2].addEventListener("click",e=>{dwnl(JSON.stringify([JSON.parse(savedb.storage.getItem("saveskey")),JSON.parse(savedb.storage.getItem("saves"))]),"FrostPlaygroundDB.fdb")}),filebtn[3].addEventListener("click",e=>{if("y"===prompt("Are you sure you want to Import? (This is irreversable) (y/n)")){let t=document.createElement("input");t.setAttribute("type","file"),t.setAttribute("accept",".fdb,.json"),t.addEventListener("change",e=>{let s=new FileReader;s.onload=()=>{try{let e=JSON.parse(s.result);savedb.storage.setItem("saveskey",JSON.stringify(e[0])),savedb.storage.setItem("saves",JSON.stringify(e[1]))}catch(t){alert("File Error: "+t)}},s.readAsText(t.files[0]),t.remove()}),t.click()}}),updTS();</script></body></html>